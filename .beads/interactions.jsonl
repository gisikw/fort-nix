{"id":"fort-040","title":"oauth2-proxy groups claim not working with Pocket ID","description":"oauth2-proxy configured with --scope=groups and --oidc-groups-claim=groups but still returns 403 for users in the allowed group. Pocket ID supports groups scope/claim per OIDC discovery. Needs investigation.","status":"open","priority":2,"issue_type":"bug","created_at":"2025-12-21T23:56:02.129313-06:00","updated_at":"2025-12-21T23:56:02.129313-06:00"}
{"id":"fort-0f8","title":"Add claude-code-ui to q host manifest","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T21:14:10.125918-06:00","updated_at":"2025-12-22T01:01:28.046688-06:00","closed_at":"2025-12-22T01:01:28.046688-06:00","close_reason":"Claude Code UI deployed and working on q host","dependencies":[{"issue_id":"fort-0f8","depends_on_id":"fort-zk9","type":"blocks","created_at":"2025-12-21T21:14:15.403159-06:00","created_by":"daemon"},{"issue_id":"fort-0f8","depends_on_id":"fort-4sb","type":"blocks","created_at":"2025-12-21T21:14:15.599336-06:00","created_by":"daemon"},{"issue_id":"fort-0f8","depends_on_id":"fort-ee2","type":"blocks","created_at":"2025-12-21T21:15:54.37237-06:00","created_by":"daemon"}]}
{"id":"fort-244","title":"Create pkgs/claude-code-ui derivation","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T21:14:09.480545-06:00","updated_at":"2025-12-21T21:23:44.616418-06:00","closed_at":"2025-12-21T21:23:44.616418-06:00","close_reason":"Superseded by fort-xzk and fort-69s for proper npm derivations"}
{"id":"fort-2i8","title":"Improve deploy-rs failure debugging","description":"When deploy-rs fails, currently requires SSH + journalctl to diagnose. Options: capture activation logs, surface systemd failures in deploy output, or create a 'just diagnose \u003chost\u003e' helper that pulls recent failures.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-21T11:41:09.489375-06:00","updated_at":"2025-12-21T11:41:09.489375-06:00"}
{"id":"fort-49n","title":"Wire more services behind Pocket ID/LDAP auth","description":"Extend SSO coverage. Candidates: SillyTavern, qbittorrent (likely feasible). Jellyfin, Home Assistant (harder - native auth integration). Current SSO modes: none, oidc, headers, basicauth, gatekeeper. Need to verify each service's auth capabilities.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-21T11:41:08.545668-06:00","updated_at":"2025-12-21T11:41:08.545668-06:00","dependencies":[{"issue_id":"fort-49n","depends_on_id":"fort-4fm","type":"blocks","created_at":"2025-12-21T11:41:23.088026-06:00","created_by":"daemon"}]}
{"id":"fort-4fm","title":"Custom derivation for Pocket ID","description":"Pocket ID on forge (drhorrible) currently requires nixpkgs unstable. Create custom derivation following Zot pattern to pin specific version and allow stable channel on forge host.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-21T11:41:08.237954-06:00","updated_at":"2025-12-21T14:10:09.907207-06:00","closed_at":"2025-12-21T14:10:09.907207-06:00","close_reason":"Closed","dependencies":[{"issue_id":"fort-4fm","depends_on_id":"fort-ax1","type":"blocks","created_at":"2025-12-21T11:41:22.888708-06:00","created_by":"daemon"}]}
{"id":"fort-4ge","title":"Module refactor: express inter-service dependencies","description":"Currently host manifests must 'just know' service dependencies. Refactor to load unparameterized module definitions into a dict first, allowing modules to express dependencies on other services (e.g., zigbee2mqtt depends on mosquitto). Manifests then select from available modules.","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-21T11:41:08.858223-06:00","updated_at":"2025-12-21T11:41:08.858223-06:00"}
{"id":"fort-4ih","title":"Fix claude-code derivation - binary is raw bun, not bundled app","description":"The binary downloaded from Anthropic's GCS bucket is just raw bun runtime, not Claude Code bundled into bun. Need to investigate proper installation - may need to run 'claude install' post-download or use npm package instead.","status":"open","priority":1,"issue_type":"bug","created_at":"2025-12-22T00:39:34.734941-06:00","updated_at":"2025-12-22T00:39:34.734941-06:00"}
{"id":"fort-4sb","title":"Add Anthropic API key secret","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T21:14:09.910321-06:00","updated_at":"2025-12-21T22:15:27.382419-06:00","closed_at":"2025-12-21T22:15:27.382419-06:00","close_reason":"Not needed - using OAuth login instead of API key"}
{"id":"fort-5g7","title":"Improve AGENTS.md with project context","description":"Current AGENTS.md is minimal (just bd reference). Add: architecture overview, key patterns (fortCluster.exposedServices, SSO modes, derivation pattern), common tasks, deployment workflow, debugging tips.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T11:41:09.171375-06:00","updated_at":"2025-12-21T12:10:34.249686-06:00","closed_at":"2025-12-21T12:10:34.249686-06:00","close_reason":"Closed"}
{"id":"fort-69s","title":"Create pkgs/claude-code-ui derivation for @siteboon/claude-code-ui","description":"Replace runtime npm install with proper Nix derivation using buildNpmPackage or similar","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T21:23:27.494844-06:00","updated_at":"2025-12-21T22:17:42.510421-06:00","closed_at":"2025-12-21T22:17:42.510421-06:00","close_reason":"Derivation written and evaluates cleanly - runtime verification deferred to deploy"}
{"id":"fort-8gl","title":"Improve deploy log visibility for agent collaboration","description":"Current friction: when agent runs deploy, token bloat + user can't review logs easily. When user runs deploy, agent can't see output. Explore options: CI/CD infra, tee to /tmp with standard filtering, or other patterns.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-21T14:22:00.169664-06:00","updated_at":"2025-12-21T14:22:00.169664-06:00"}
{"id":"fort-99q","title":"Add 'just discover' task to trigger service registry","description":"Currently requires SSH to drhorrible to manually kick off service discovery. Add a just task for convenience.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-21T22:38:48.191652-06:00","updated_at":"2025-12-21T22:38:48.191652-06:00"}
{"id":"fort-a8o","title":"Review/improve secrets management","description":"Current setup uses agenix with device key rotation. Areas to evaluate: secret rotation workflow, onboarding new secrets, whether KEYED_FOR_DEVICES pattern is optimal, documentation of secrets workflow.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-21T11:41:09.822948-06:00","updated_at":"2025-12-21T11:41:09.822948-06:00"}
{"id":"fort-ax1","title":"Establish custom derivations pattern","description":"Define a consistent pattern/location for custom derivations. Currently Zot lives inline in apps/zot/default.nix. Options: dedicated pkgs/ or overlays/ directory, or keep inline. Should inform Termix and Pocket ID work.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-21T11:41:07.637411-06:00","updated_at":"2025-12-21T12:46:12.65483-06:00","closed_at":"2025-12-21T12:46:12.65483-06:00","close_reason":"Closed"}
{"id":"fort-c33","title":"Consolidate fortCluster options under fort.cluster","description":"Rename fortCluster.* options to fort.cluster.* (e.g., fort.cluster.exposedServices). Reduces magic globals and provides a single namespace for fort-specific NixOS options.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-21T12:18:03.246583-06:00","updated_at":"2025-12-21T12:18:03.246583-06:00"}
{"id":"fort-ee2","title":"Create claude-users LDAP group in lldap","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T21:15:50.927493-06:00","updated_at":"2025-12-21T22:20:30.130349-06:00","closed_at":"2025-12-21T22:20:30.130349-06:00","close_reason":"User added claude-users group to ldap-groups.age"}
{"id":"fort-efv","title":"Remove claude-code-ui internal auth once groups restriction works","description":"Once fort-040 (oauth2-proxy groups claim) is fixed, disable or bypass the internal username/password auth in claude-code-ui. VPN + gatekeeper + groups should be sufficient.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-22T00:30:13.582813-06:00","updated_at":"2025-12-22T00:30:13.582813-06:00","dependencies":[{"issue_id":"fort-efv","depends_on_id":"fort-040","type":"blocks","created_at":"2025-12-22T00:30:18.458525-06:00","created_by":"daemon"}]}
{"id":"fort-fh7","title":"Deploy Claude Code UI to q host","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T21:08:48.459214-06:00","updated_at":"2025-12-22T01:01:28.249789-06:00","closed_at":"2025-12-22T01:01:28.249789-06:00","close_reason":"Claude Code UI fully deployed - VPN + gatekeeper auth + internal auth working, Claude OAuth complete"}
{"id":"fort-gel","title":"Add Termix as hosted app on q","description":"Deploy Termix (github.com/Termix-SSH/Termix) on q host. Fast-moving project, likely needs custom derivation. SSH-based terminal sharing tool.","notes":"## Blocker: OIDC requires UI configuration\n\nAs of v1.9.0, Termix OIDC can only be configured via Admin Settings UI - no env vars or config files supported yet. Docs say \"cannot be created using environment variables yet\", suggesting it's on their roadmap.\n\n### Scaffolding approach (not committed)\n- OCI container pattern like sillytavern/homepage\n- Image: ghcr.io/lukegus/termix:latest  \n- Port 8080, data volume at /var/lib/termix\n\n### To validate on revisit\n1. Check https://docs.termix.site/oidc for env var support\n2. Check release notes for \"OIDC configuration\" or \"environment variable\" mentions\n3. Search repo for OIDC_* env vars in Dockerfile or source\n\n### Workaround if still UI-only\nCould potentially script the OIDC setup by:\n- Creating admin account on first boot\n- Using admin session to POST to internal OIDC config endpoint\n- Would need to reverse-engineer the API calls from the UI\n\n### References\n- Termix OIDC docs: https://docs.termix.site/oidc\n- Container image: ghcr.io/lukegus/termix:latest","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-21T11:41:07.941134-06:00","updated_at":"2025-12-21T15:54:49.479274-06:00","dependencies":[{"issue_id":"fort-gel","depends_on_id":"fort-ax1","type":"blocks","created_at":"2025-12-21T11:41:22.692611-06:00","created_by":"daemon"}]}
{"id":"fort-kl1","title":"Age files must be committed before deploy to avoid revert","description":"When age files are modified but not committed, the deploy process may revert them due to rekeying logic. This is a footgun for operators.","status":"open","priority":2,"issue_type":"bug","created_at":"2025-12-21T22:20:30.351213-06:00","updated_at":"2025-12-21T22:20:30.351213-06:00"}
{"id":"fort-qz3","title":"Add 'just diagnose \u003chost\u003e' helper","description":"Create a non-interactive diagnostic command that pulls common debug info from a host: failed systemd units, recent journal errors, disk space, memory, etc. Useful for agents who can't use interactive SSH.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-21T12:18:02.974999-06:00","updated_at":"2025-12-21T12:18:02.974999-06:00"}
{"id":"fort-xeb","title":"Document service registry OIDC provisioning flow","description":"The dummy-creds-then-real-creds flow via service-registry is non-intuitive. Add docs to AGENTS.md or README explaining: 1) oauth2-proxy starts with placeholder creds, 2) service-registry provisions real OIDC clients, 3) proxy gets restarted with real creds","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-21T22:38:47.981881-06:00","updated_at":"2025-12-21T22:38:47.981881-06:00"}
{"id":"fort-xzk","title":"Create pkgs/claude-code derivation for @anthropic-ai/claude-code","description":"Replace runtime npm install with proper Nix derivation using buildNpmPackage or similar","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T21:23:27.212414-06:00","updated_at":"2025-12-21T21:34:24.368933-06:00","closed_at":"2025-12-21T21:34:24.368933-06:00","close_reason":"Closed"}
{"id":"fort-z0b","title":"Investigate lldap-bootstrap flakiness","description":"lldap-bootstrap.service occasionally fails with 'jq: parse error: Invalid numeric literal at line 1, column 5'. Observed during deploy to drhorrible. May be a race condition or malformed secret file.","status":"open","priority":4,"issue_type":"bug","created_at":"2025-12-21T12:46:06.509684-06:00","updated_at":"2025-12-21T12:46:06.509684-06:00"}
{"id":"fort-zk9","title":"Create apps/claude-code-ui app module","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T21:14:09.693182-06:00","updated_at":"2025-12-21T22:17:42.711976-06:00","closed_at":"2025-12-21T22:17:42.711976-06:00","close_reason":"App module written with OAuth support","dependencies":[{"issue_id":"fort-zk9","depends_on_id":"fort-244","type":"blocks","created_at":"2025-12-21T21:14:15.207987-06:00","created_by":"daemon"},{"issue_id":"fort-zk9","depends_on_id":"fort-xzk","type":"blocks","created_at":"2025-12-21T21:23:44.154292-06:00","created_by":"daemon"},{"issue_id":"fort-zk9","depends_on_id":"fort-69s","type":"blocks","created_at":"2025-12-21T21:23:44.392207-06:00","created_by":"daemon"}]}
